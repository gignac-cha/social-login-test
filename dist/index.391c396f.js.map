{"mappings":"AAEO,MAAMA,EAAsB,CAACC,EAAaC,EAAyB,MACxE,MAAMC,EAA4BC,SAASC,cAAc,UACzDF,EAAOG,aAAa,MAAOL,GAC3B,IAAK,MAAMM,KAAOL,EAChBC,EAAOG,aAAaC,EAAKL,EAAWK,IAEtC,OAAOJ,CAAM,ECCTK,EAAgBC,GAA4C,CAChEC,eAAkBD,EAAME,OAAO,CAAEC,MAAO,kBACxCF,eAAkBD,EAAMI,W,IA4B1BC,EAAe,C,IAjCI,yC,WAQOJ,MAAOK,IAC/B,GAAIC,OAAOC,eAAe,QAAS,CACjC,MAAMC,EAAsBF,OAAa,KACzC,OAAOR,EAAaU,EAAOT,MAAMU,kB,CASnC,OAAO,IAAIC,SAAmB,CAACC,EAASC,KACtC,MAAMnB,EAA4BH,EArBnB,yCAqB4C,CAAEU,MAAO,GAAIa,MAAO,KAC/EpB,EAAOqB,iBAAiB,QAASC,IAC/B,MAAMP,EAAsBF,OAAa,KACzCE,EAAOQ,KAAK,SAAShB,UACnB,MAAMD,EAA+BS,EAAOT,MAAMkB,KAAK,CAAEC,UAAWb,IACpEM,EAAQb,EAAaC,GAAO,GAC5B,IAEJL,SAASyB,KAAKC,YAAY3B,EAAO,GACjC,GClCJa,OAAOQ,iBAAiB,QAAQd,MAAOe,UAC/BX,EAAYiB,WAAW,2EAA2E","sources":["socialLogins/utilities.ts","socialLogins/google.ts","script.ts"],"sourcesContent":["type Attributes = { [key: string]: string };\r\n\r\nexport const createScriptElement = (url: string, attributes: Attributes = {}): HTMLScriptElement => {\r\n  const script: HTMLScriptElement = document.createElement('script');\r\n  script.setAttribute('src', url);\r\n  for (const key in attributes) {\r\n    script.setAttribute(key, attributes[key]);\r\n  }\r\n  return script;\r\n};\r\n","// import 'gapi';\r\n// import 'gapi.auth2';\r\n\r\nimport { SocialLogIn, SocialLogOut } from './types';\r\nimport { createScriptElement } from \"./utilities\";\r\n\r\nexport const URL = 'https://apis.google.com/js/platform.js';\r\n\r\ntype Functions = [ SocialLogIn<gapi.auth2.GoogleUser>, SocialLogOut<void> ];\r\nconst getFunctions = (auth2: gapi.auth2.GoogleAuth): Functions => [\r\n  async () => await auth2.signIn({ scope: 'profile email' }),\r\n  async () => await auth2.signOut(),\r\n];\r\n\r\nexport const initialize = async (clientId: string): Promise<Functions> => {\r\n  if (window.hasOwnProperty('gapi')) {\r\n    const google: typeof gapi = window['gapi'];\r\n    return getFunctions(google.auth2.getAuthInstance());\r\n  }\r\n  // const scripts: HTMLScriptElement[] = Array.from(document.querySelectorAll('script[src]'));\r\n  // const scripts: NodeListOf<HTMLScriptElement> = document.querySelectorAll('script[src]');\r\n  // for (const script of scripts) {\r\n  //   if (script.getAttribute('src') === URL) {\r\n  //     return getFunctions();\r\n  //   }\r\n  // }\r\n  return new Promise<Functions>((resolve, reject) => {\r\n    const script: HTMLScriptElement = createScriptElement(URL, { async: '', defer: '' });\r\n    script.addEventListener('load', (ev: Event) => {\r\n      const google: typeof gapi = window['gapi'];\r\n      google.load('auth2', async () => {\r\n        const auth2: gapi.auth2.GoogleAuth = google.auth2.init({ client_id: clientId });\r\n        resolve(getFunctions(auth2));\r\n      });\r\n    });\r\n    document.head.appendChild(script);\r\n  });\r\n};\r\n\r\nexport default { URL, initialize };\r\n","import { GoogleLogin } from './socialLogins';\r\n\r\nwindow.addEventListener('load', async (ev: Event) => {\r\n  await GoogleLogin.initialize('784707615791-9qvlv26kv51vma6qclohk84uu06bn1bu.apps.googleusercontent.com');\r\n});\r\n"],"names":["$4fbe2c45ddda13be$export$28503efd90ff36be","url","attributes","script","document","createElement","setAttribute","key","$9695b605f556514f$var$getFunctions","auth2","async","signIn","scope","signOut","$9695b605f556514f$export$2e2bcd8739ae039","clientId","window","hasOwnProperty","google","getAuthInstance","Promise","resolve","reject","defer","addEventListener","ev","load","init","client_id","head","appendChild","initialize"],"version":3,"file":"index.391c396f.js.map"}